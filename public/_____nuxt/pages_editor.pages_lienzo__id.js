(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{176:function(t,e,o){},177:function(t,e,o){},180:function(t,e,o){},181:function(t,e,o){},190:function(t,e,o){"use strict";var n={data:function(){return{abierto:!1,formatos:[{nombre:"pdf",titulo:"Archivo PDF"},{nombre:"img",titulo:"Imagen"}]}},methods:{exportar:function(t){this.abierto=!1,this.$emit("accion","exportar:".concat(t))}}},r=(o(210),o(20)),c=Object(r.a)(n,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{attrs:{id:"accion-exportar"}},[o("button",{on:{click:function(e){t.abierto=!t.abierto}}},[t._v("Exportar")]),o("div",{directives:[{name:"show",rawName:"v-show",value:t.abierto,expression:"abierto"}],staticClass:"lista"},t._l(t.formatos,(function(e){return o("button",{attrs:{type:"button"},on:{click:function(o){return t.exportar(e.nombre)}}},[o("span",[t._v(t._s(e.titulo))])])})),0)])}),[],!1,null,null,null).exports,l=(o(71),o(29),o(21),o(13),o(55),o(17),o(2)),h=o(40),d=o(56);function f(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(object);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,o)}return e}function v(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?f(Object(source),!0).forEach((function(e){Object(h.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):f(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var m,O={computed:v({},Object(d.e)(["nombre"])),methods:v({guardar:(m=Object(l.a)(regeneratorRuntime.mark((function t(){var e,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.nombre){t.next=6;break}return t.next=3,this.$swal.fire({title:"Guardar diseño",text:"Nombre del diseño",input:"text",showCancelButton:!0,confirmButtonText:"Guardar"});case 3:e=t.sent,(o=e.value)&&this.establecerNombre(o);case 6:this.$emit("accion","guardar");case 7:case"end":return t.stop()}}),t,this)}))),function(){return m.apply(this,arguments)})},Object(d.d)(["establecerNombre"]),{},Object(d.b)(["guardarDiseño"]))},w={components:{Exportar:c,Guardar:Object(r.a)(O,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"accion-guardar"}},[e("button",{attrs:{type:"button"},on:{click:this.guardar}},[this._v("Guardar")])])}),[],!1,null,null,null).exports}},y=(o(211),Object(r.a)(w,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{attrs:{id:"acciones"}},[o("Exportar",{staticClass:"accion",on:{accion:function(e){return t.$emit("accion",e)}}}),o("Guardar",{staticClass:"accion",on:{accion:function(e){return t.$emit("accion",e,arguments[1])}}}),o("button",{staticClass:"accion",on:{click:function(e){return t.$emit("accion","volver")}}},[t._v("Volver")])],1)}),[],!1,null,null,null));e.a=y.exports},191:function(t,e,o){"use strict";o(71),o(13),o(55);var n=o(40),r=(o(73),o(58),o(29),o(21),o(193),o(196)),c=o.n(r),l=o(198);function h(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(object);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,o)}return e}function d(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?h(Object(source),!0).forEach((function(e){Object(n.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):h(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}for(var f in l.fabric)l.fabric.hasOwnProperty(f);var v={"":["drop","dragover","dragenter","dragleave"],object:["moving","scaling","rotating","skewing","moved","scalec","rotated","skewed","modified","selected","added","removed"],selection:["created","cleared","updated"],mouse:["up","down","move","dblclick","wheel","over","out"]},m={props:{ancho:{type:Number,default:320},alto:{type:Number,default:240},escala:{type:Number,default:1}},data:function(){return{lienzo:null}},computed:{opciones:function(){return{id:"objeto"+this.lienzo.getObjects().length,cornerStrokeColor:"white",cornerColor:"black",cornerStyle:"circle",hasControls:!1,hasBorders:!0,lockMovementX:!0,lockMovementY:!0,scaleX:1,scaleY:1}}},mounted:function(){var t=this;if(console.debug("mounted","fabric"),null==this.lienzo){for(var e in this.lienzo=new l.fabric.Canvas(this.$refs.lienzo,{preserveObjectStacking:!0}),this.lienzo.backgroundColor="white",this.actualizar(),v){var o=!0,n=!1,r=void 0;try{for(var c,h=function(){var o=c.value,n=e.length?"".concat(e,":").concat(o):o;t.lienzo.on(n,(function(e){t.$emit(n.replace(":","-"),e)}))},d=v[e][Symbol.iterator]();!(o=(c=d.next()).done);o=!0)h()}catch(t){n=!0,r=t}finally{try{o||null==d.return||d.return()}finally{if(n)throw r}}}this.lienzo.on("selection:updated",this.selectionUpdated)}},methods:{activo:function(){return this.lienzo.getActiveObject()},actualizar:function(){this.lienzo.setWidth(this.ancho*this.escala),this.lienzo.setHeight(this.alto*this.escala),this.lienzo.setZoom(this.escala),this.lienzo.requestRenderAll()},selectionUpdated:function(t){var e=t.target;console.debug(e)},rectangulo:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e={width:100,height:100,fill:"#0099FF",left:0,top:0},rect=new l.fabric.Rect(d({},this.opciones,{},e,{},t));this.lienzo.add(rect),this.actualizar()},imagen:function(t){var e=this,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={id:"imagen"+this.lienzo.getObjects().length,left:.5*this.ancho,top:.5*this.alto,originX:"left",originY:"top"};l.fabric.Image.fromURL(t,(function(img){var t=img.width,r=img.height;(c.a.has(o,"ancho")||c.a.has(o,"alto"))&&("number"==typeof o.ancho&&(t=o.ancho,"auto"===o.alto&&(r=img.height/img.width*t)),"number"==typeof o.alto&&(r=o.alto,"auto"===o.ancho&&(t=img.width/img.height*r))),n.scaleX=t/img.width,n.scaleY=r/img.height,img.set(d({},e.opciones,{},n,{},o)),e.lienzo.add(img),c.a.has(o,"zindex")&&img.moveTo(o.zindex),e.actualizar()}))},actualizarImagen:function(t,e){var o=this;t.set({scaleX:1,scaleY:1,clipPath:null}),console.debug(t.scaleX),console.debug(t.scaleY),console.debug(t.width),console.debug(t.height),console.debug(t.getScaledWidth()),console.debug(t.getScaledHeight()),console.debug("---------------");var n=t.width,r=t.height;t.setSrc(e,(function(t){console.debug(n),console.debug(r),console.debug(t.width),console.debug(t.height),n<r?(t.scaleToWidth(n,!0),console.log("escalar ancho",n)):(t.scaleToHeight(r,!0),console.log("escalar alto")),console.debug(t.getScaledWidth()),console.debug(t.getScaledHeight()),console.debug(t.scaleX),console.debug(t.scaleY),t.set({width:n,height:r}),o.$nextTick(o.actualizar)}))},titulo:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o={id:"titulo"+this.lienzo.getObjects().length,left:10,top:10,fontFamily:"Roboto"},n=new l.fabric.IText(t,d({},this.opciones,{},o,{},e));this.lienzo.add(n),c.a.has(e,"zindex")&&n.moveTo(e.zindex),this.actualizar()},parrafo:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o={id:"parrafo"+this.lienzo.getObjects().length,left:10,top:10,width:300,fontFamily:"Roboto"},n=new l.fabric.Textbox(t,d({},this.opciones,{},o,{},e));this.lienzo.add(n),c.a.has(n,"zindex")&&n.moveTo(n.zindex),this.actualizar()},cargar:function(t){this.lienzo.clear(),this.lienzo.backgroundColor=t.fondo||"white";var e=!0,o=!1,n=void 0;try{for(var r,c=t.objetos[Symbol.iterator]();!(e=(r=c.next()).done);e=!0){var l=r.value;switch(l.tipo){case"rectangulo":this.rectangulo(l.opciones);break;case"imagen":this.imagen(l.ruta,l.opciones);break;case"titulo":this.titulo(l.texto,l.opciones);break;case"parrafo":this.parrafo(l.texto,l.opciones)}}}catch(t){o=!0,n=t}finally{try{e||null==c.return||c.return()}finally{if(o)throw n}}this.actualizar()},json:function(){return this.lienzo.toJSON()},obtenerImagen:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return this.lienzo.toDataURL({format:t,multiplier:e})},obtenerSVG:function(t){return this.lienzo.toSVG(t)}}},O=(o(206),o(20)),component=Object(O.a)(m,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"fabric",attrs:{id:"fabric"}},[e("div",{staticClass:"contenedor"},[e("canvas",{ref:"lienzo",attrs:{width:this.ancho,height:this.alto}})])])}),[],!1,null,"63cd9bf4",null);e.a=component.exports},192:function(t,e,o){"use strict";var n={props:{objeto:{default:null,type:Object}},computed:{modo:function(){return this.objeto?this.objeto.get("type"):null}},methods:{propiedad:function(t){return null},seleccionaImagen:function(){this.$refs.inputImagen.click()},inputImagenChange:function(){var input=this.$refs.inputImagen;if(input.files&&input.files[0]){var t=new FileReader,e=this;t.onload=function(t){console.log("Imagen Cargada","opciones"),e.$emit("imagen-cargada",t.target.result)},t.readAsDataURL(input.files[0])}}}},r=(o(207),o(20)),component=Object(r.a)(n,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"opciones"}},["image"==this.modo?e("div",{staticClass:"panel"},[e("div",{staticClass:"grupo"},[e("input",{ref:"inputImagen",staticClass:"oculto",attrs:{type:"file"},on:{change:this.inputImagenChange}}),e("button",{attrs:{type:"button"},on:{click:this.seleccionaImagen}},[this._v("Subir imagen ...")])])]):this._e()])}),[],!1,null,"0f505e40",null);e.a=component.exports},203:function(t,e){},204:function(t,e){},205:function(t,e){},206:function(t,e,o){"use strict";var n=o(176);o.n(n).a},207:function(t,e,o){"use strict";var n=o(177);o.n(n).a},210:function(t,e,o){"use strict";var n=o(180);o.n(n).a},211:function(t,e,o){"use strict";var n=o(181);o.n(n).a}}]);